<!doctype html>
<html>
  <head>
    <title>Raw Print</title>
    <script src="/raw-print-client.js"></script>
    <style>
      html {
        font-family: "Arial";
        line-height: 1.5;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      ::selection {
        color: white;
        background: black;
      }

      .form .text-input, .form .textarea, .form .label, .form .button {
        padding: 0.75em 1.5em;
        appearance: none;
        outline: none;
        line-height: normal;
        border-radius: 0;
        border: none;
      }

      h1, h2 {
        margin: .5em 0;
        text-align: center;
        min-width: 100%;
        flex-basis: 20em;
        font-weight: 600;
        line-height: 1em;
      }
      
      h1 {
        font-size: 2em;
      }

      body {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
      }

      #wrapper {
        flex: 1;
        align-items: center;
        width: 100%;
        box-sizing: border-box;
        padding: 2em;
      }
      
      .form .text-input, .form .textarea, .form .label, .form .button {
        appearance: none;
        outline: none;
        line-height: normal;
        border: 1px solid transparent;
        border-radius: 0;
      }

      .form .text-input, .form .textarea {
        font: inherit;
        line-height: normal;
        width: 100%;
        box-sizing: border-box;
        display: block;
        padding-left: 0;
        border-bottom-color: rgba(0, 0, 0, 0.3);
        background: transparent;
        outline: none;
        color: black;
      }
      .form .text-input:placeholder, .form .textarea:placeholder {
        color: rgba(0, 0, 0, 0.7);
      }
      
      .form .text-input:active, .form .textarea:active, .form .text-input:focus, .form .textarea:focus {
        border-color: transparent transparent black transparent;
      }

      .form .label {
        pointer-events: none;
        padding-left: 0;
        color: rgba(0, 0, 0, 0.7);    
        padding: .5em 1em;
        background: #fafafa;
        display: block;
      }

      .form .button {
        font: inherit;
        line-height: normal;
        cursor: pointer;
        background-color: black;
        color: white;
        text-transform: uppercase;
        text-align: center;
        display: block;
        margin: 1em auto;
        letter-spacing: 0.1428571429em;
      }
      .form .button:hover, .form .button:focus, .form .button:active {
        color: white;
        background: black;
      }
      .form .button:active {
        position: relative;
        top: 1px;
        left: 1px;
      }

      .form {
        max-width: 50em;
        margin: 0 auto;
        padding: 1em 2em;
        box-sizing: border-box;
        overflow: hidden;
        display: flex;
        flex-wrap: wrap;
      }
      .form .field {
        position: relative;
        width: 100%;
        padding: .5em 1em;
        flex-basis: 100%;
        min-width: 20em;
        box-sizing: border-box;
        background: #fefefe;
        margin: 0;
        border: 1px solid #fafafa;
      }
      .form .field.half {
        flex-basis: 50%;
        min-width: 10em;
      }
    </style>
  </head>
  <body>
    
    <div id='wrapper'>
      <form class='form'>
        <h1>Raw Print</h1>
        <h2>PRN File to Printer Made Easy</h2>
        <p class='field required half'>
          <label class='label required' for='printer'>Printer</label>
          <input class='text-input' id='printer' name='printer' required type='text' value="ZGC420t">
        </p>
        <p class='field required half'>
          <label class='label' for='password'>Password</label>
          <input class='text-input' id='password' name='password' required type='password' value="xEPgJ5EjKdw1Rtg0">
        </p>
        <p class='field'>
          <label class='label' for='prn'>PRN</label>
          <textarea class='textarea' cols='50' id='prn' name='prn' required rows='54'>I8,A,001

N
q1000
Q600,24+0
S2
D8
ZT
TTh:m
TDdd.mm.y4
A5,10,0,3,2,3,R,"FRIG. Y MAT. CHIVILCOY S.A."
LO5,138,764,2
LO5,575,764,2
LO5,139,3,437
LO767,139,3,437
A5,75,0,2,1,1,N,"RUTA NACIONAL 5 KM 163 - (6620) CHIVILCOY - BS.AS. - Argentina"
A5,95,0,2,1,1,N,"TEL: (02346) 422515 / 423058 Fax: 427969"
A5,114,0,1,1,2,N,"C.U.I.T.: 30-63153679-0"
A290,114,0,1,1,2,N,"INSC. ONCCA: 085457-3"
A538,114,0,1,1,2,N,"EST. OFICIAL NRO: 2076"
A18,146,0,2,1,2,N,"TITULAR DE FAENA:"
A244,146,0,2,1,2,N,"Ntitula"
A343,177,0,2,1,1,N,"ONCCA:"
A447,177,0,2,1,1,N,"Nmat"
A20,179,0,2,1,1,N,"C.U.I.T.:"
A118,179,0,2,1,1,N,"20-37120959-0"
A18,210,0,2,1,2,N,"FECHA FAENA:"
A170,210,0,2,2,2,N,"DTPicker1"
A616,223,0,4,5,5,R,"1"
A22,480,0,4,2,1,N,"GARRON"
A55,518,0,3,2,2,N,"Ngarron"
A150,288,0,3,3,3,N,"Ntipif"
A30,288,0,3,3,3,N,"Nclasi"
A118,359,0,4,2,5,N,"Npeso"
A256,370,0,4,2,1,N,"NtipoConsumo"
A302,252,0,2,2,2,N,"D.C."
A292,288,0,3,3,3,N,"TextBox4"
A579,430,0,3,1,2,N,"TIPIFICADOR"
A618,467,0,3,2,3,N,"TipMat"
A590,524,0,3,1,2,N,"MATRICULA"
B246,451,0,1,3,3,63,N,"12345678"
A30,254,0,2,1,2,N,"CLASIF."
A445,238,0,2,2,2,N,"TROPA"
A440,286,0,3,2,3,N,"Ntropa"
A22,370,0,3,1,2,N,"PESO:"
A160,252,0,2,1,2,N,"TIPIF."
A10,580,0,1,1,1,N,"Industria Argentina"
A319,520,0,3,2,2,N,"12345678"
LO548,420,210,4
LO548,562,210,4
LO548,423,5,140
LO771,423,5,140
P1
</textarea>
        </p>
        <p class='field'>
          <input class='button' type='submit' value='Imprimir'>
          <label class="message-box"></label>
        </p>
      </form>
    </div>

    <script>      
      document.querySelector('form')
              .addEventListener('submit', function(evt) {
                evt.preventDefault();
                evt.stopPropagation();
                
                var name = document.querySelector('input[name="printer"]').value,
                    rawPrn = document.querySelector('textarea[name="prn"]').value,
                    password = document.querySelector('input[name="password"]').value;
                    message = document.querySelector('.message-box');

                rawPrint(name, rawPrn, password)
                  .then(function(result) {
                    message.innerHTML = result;
                  })
                  .catch(function(result) {
                    message.innerHTML = result;
                  });                  
              });
    </script>
  </body>
</html>