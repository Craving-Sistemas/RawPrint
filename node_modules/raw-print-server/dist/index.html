<!doctype html>
<html>
  <head>
    <title>Raw Print</title>
    <script src="/raw-print-client.js"></script>
    <style>
      html {
        font-family: "Arial";
        line-height: 1.5;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      ::selection {
        color: white;
        background: black;
      }

      .form .text-input, .form .textarea, .form .label, .form .button {
        padding: 0.75em 1.5em;
        appearance: none;
        outline: none;
        line-height: normal;
        border-radius: 0;
        border: none;
      }

      h1, h2 {
        margin: .5em 0;
        text-align: center;
        min-width: 100%;
        flex-basis: 20em;
        font-weight: 600;
        line-height: 1em;
      }
      
      h1 {
        font-size: 2em;
      }

      body {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
      }

      #wrapper {
        flex: 1;
        align-items: center;
        width: 100%;
        box-sizing: border-box;
        padding: 2em;
      }
      
      .form .text-input, .form .textarea, .form .label, .form .button {
        appearance: none;
        outline: none;
        line-height: normal;
        border: 1px solid transparent;
        border-radius: 0;
      }

      .form .text-input, .form .textarea {
        font: inherit;
        line-height: normal;
        width: 100%;
        box-sizing: border-box;
        display: block;
        padding-left: 0;
        border-bottom-color: rgba(0, 0, 0, 0.3);
        background: transparent;
        outline: none;
        color: black;
      }
      .form .text-input:placeholder, .form .textarea:placeholder {
        color: rgba(0, 0, 0, 0.7);
      }
      
      .form .text-input:active, .form .textarea:active, .form .text-input:focus, .form .textarea:focus {
        border-color: transparent transparent black transparent;
      }

      .form .label {
        pointer-events: none;
        padding-left: 0;
        color: rgba(0, 0, 0, 0.7);    
        padding: .5em 1em;
        background: #fafafa;
        display: block;
      }

      .form .button {
        font: inherit;
        line-height: normal;
        cursor: pointer;
        background-color: black;
        color: white;
        text-transform: uppercase;
        text-align: center;
        display: block;
        margin: 1em auto;
        letter-spacing: 0.1428571429em;
      }
      .form .button:hover, .form .button:focus, .form .button:active {
        color: white;
        background: black;
      }
      .form .button:active {
        position: relative;
        top: 1px;
        left: 1px;
      }

      .form {
        max-width: 50em;
        margin: 0 auto;
        padding: 1em 2em;
        box-sizing: border-box;
        overflow: hidden;
        display: flex;
        flex-wrap: wrap;
      }
      .form .field {
        position: relative;
        width: 100%;
        padding: .5em 1em;
        flex-basis: 100%;
        min-width: 20em;
        box-sizing: border-box;
        background: #fefefe;
        margin: 0;
        border: 1px solid #fafafa;
      }
      .form .field.half {
        flex-basis: 50%;
        min-width: 10em;
      }
    </style>
  </head>
  <body>
    
    <div id='wrapper'>
      <form class='form'>
        <h1>Raw Print</h1>
        <h2>PRN File to Printer Made Easy</h2>
        <p class='field required half'>
          <label class='label required' for='printer'>Printer</label>
          <input class='text-input' id='printer' name='printer' required type='text' value="ZGC420t">
        </p>
        <p class='field required half'>
          <label class='label' for='password'>Password</label>
          <input class='text-input' id='password' name='password' required type='password' value="xEPgJ5EjKdw1Rtg0">
        </p>
        <p class='field'>
          <label class='label' for='prn'>PRN</label>
          <textarea class='textarea' cols='50' id='prn' name='prn' required rows='22'>I8,A,001


Q639,024
q831
rN
S3
D7
ZT
JF
O
R16,0
f100
N
X115,130,8,684,509
X0,0,80,799,639
A615,379,2,4,3,3,N,"Raw Print"
A631,304,2,4,1,1,N,"PRN File to Printer Made Easy"
A468,115,2,4,1,1,N,"https://craving.com.ar"
LO180,313,439,4
P1
</textarea>
        </p>
        <p class='field'>
          <input class='button' type='submit' value='Imprimir'>
          <label class="message-box"></label>
        </p>
      </form>
    </div>

    <script>      
      document.querySelector('form')
              .addEventListener('submit', function(evt) {
                evt.preventDefault();
                evt.stopPropagation();
                
                var name = document.querySelector('input[name="printer"]').value,
                    rawPrn = document.querySelector('textarea[name="prn"]').value,
                    password = document.querySelector('input[name="password"]').value;
                    message = document.querySelector('.message-box');

                rawPrint(name, rawPrn, password)
                  .then(function(result) {
                    message.innerHTML = result;
                  })
                  .catch(function(result) {
                    message.innerHTML = result;
                  });                  
              });
    </script>
  </body>
</html>